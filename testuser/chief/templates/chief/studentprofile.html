{% extends "newapp/home.html" %}
{% load staticfiles %}
{% load material_form %}
{% block title %} Warden - HMS {% endblock %}

{% block extrastyle %} 
<style type="text/css">
	#details{
		font-size: 24px;
	}
</style>
{% endblock %}

{% block content %}	
<div class="row">
	<h3 class="center">Student Profile</h3>
	<hr>
	<div class="s12">
		<div class="row" id="studentInfo">
			<div class="col s12 m6 l6" id="stuLeft">
				<span id="details"class="center">Personal Details</span>
				<a href = "{% url 'print-stu-details' s.username %}"><i class="material-icons">print</i></a>
				<hr>
				<table class="striped centered bordered">
					<tr>
						<td>
							Roll Number :
						</td>
						<td>
							{{s.username}}
						</td>
					</tr>
					<tr>
						<td>
							Name :
						</td>
						<td>
							{{s.name}}
						</td>
					</tr>
					<tr>
						<td>
							Date of Birth
						</td>
						<td>
							{{ s.date_of_birth }}
						</td>
					</tr>
					<tr>
						<td>
							Hostel :
						</td>
						{% if s.room_number %}
						<td>
							{{ s.room_number.hostel.hostel_name }}
						</td>
						{% else %}
						<td>
							None
						</td>
						{% endif %}
					</tr>
					<tr>
						<td>
							Room Number :
						</td>
						{% if s.room_number %}
						<td>
							{{ s.room_number }}
						</td>
						{% else %}
						<td>
							None
						</td>
						{% endif %}
					</tr>
					<tr>
						<td>
							Branch :
						</td>
						<td>
							{{ s.branch }}
						</td>
					</tr>
					<tr>
						<td>
							Current Hostel Join Date :
						</td>
						<td>
							{{ s.current_hostel_join_date }}
						</td>
					</tr>
					<tr>
						<td>
							Distance from Nsit :
						</td>
						<td>
							{{ s.distance_from_nsit }}
						</td>
					</tr>
					<tr>
						<td>
							Gender :
						</td>
						<td>
							{{ s.gender }}
						</td>
					</tr>
					<tr>
						<td>
							Blood group : 
						</td>
						<td>
							{{ s.blood_group }}
						</td>
					</tr>
					<tr>
						<td>
							College category :
						</td>
						<td>
							{{ s.college_category }}
						</td>
					</tr>
					<tr>
						<td>
							Phone Number :
						</td>
						<td>
							{{  s.student_phone_num }}
						</td>
					</tr>
					<tr>
						<td>
							Optional Phone number :
						</td>
						{% if s.student_optional_phone_num %}
						<td>
							{{ s.student_optional_phone_num }}
						</td>
						{% else %}
						<td>
							None
						</td>
						{% endif %}
					</tr>
					<tr>
						<td>
							Email Id :
						</td>
						<td>
							{{ s.student_email }}
						</td>
					</tr>
					<tr>
						<td>
							Father's Name :
						</td>
						<td>
							{{ s.father_name }}
						</td>
					</tr>
					<tr>
						<td>
							Mother's name :
						</td>
						<td>
							{{ s.mother_name }}
						</td>
					</tr>
					<tr>
						<td>
							Parent's email :
						</td>
						<td>
							{{ s.parent_email }}
						</td>
					</tr>
					<tr>
						<td>
							Parent's phone number :
						</td>
						<td>
							{{ s.parent_phone_num }}
						</td>
					</tr>
					<tr>
						<td>
							Parent's optional phone number :
						</td>
						{% if s.parent_optional_phone_num %}
						<td>
							{{ s.parent_optional_phone_num }}
						</td>
						{% else %}
						<td>
							None
						</td>
						{% endif %}
					</tr>
					<tr>
						<td>
							Permenant address :
						</td>
						<td>
							{{ s.permanent_address }}
						</td>
					</tr>
					<tr>
						<td>
							Permenant address zipcode :
						</td>
						<td>
							{{ s.permanent_address_zipcode }}
						</td>
					</tr>
					<tr>
						<td>
							Local guardian name :
						</td>
						<td>
							{{ s.local_guardian_name }}
						</td>
					</tr>
					<tr>
						<td>
							Local guardian address :
						</td>
						<td>
							{{ s.local_guardian_address }}
						</td>
					</tr>
					<tr>
						<td>
							Local guardian address zipcode :
						</td>
						<td>
							{{ s.local_guardian_address_zipcode }}
						</td>
					</tr>
					<tr>
						<td>
							Local Guardian Phone Number :
						</td>
						<td>
							{{ s.local_guardian_phone_num }}
						</td>
					</tr>
					<tr>
						<td>
							Local Guardian optional phone number :
						</td>
						{% if s.local_guardian_optional_phone_num %}
						<td>
							{{ s.local_guardian_optional_phone_num }}
						</td>
						{% else %}
						<td>
							None
						</td>
						{% endif %}
					</tr>
					<tr>
						<td>
							Local Guardian Email :
						</td>
						<td>
							{{ s.local_guardian_email }}
						</td>
					</tr>

				</table>
			</div>
			<div class="col s12 m6 l6" id="stuRight">
				{% if s.student_photo %}
				<img class="profilepic" src="{{ s.student_photo.url }}">
				{% else %}
				<img class="profilepic" src="/media/demo.png">
				{% endif %}				
				<h5 class="center">
					Previous Hostel History
				</h5>
				<hr>
				{% if prev|length >= 0 %}
				<table class="striped centered bordered"id="table1">
					<tr >
						<th >
							S.No.
						</th>
						<th >
							Hostel
						</th>
						<th >
							Room no.
						</th>
						<th >
							Join Date
						</th>
						<th >
							Left on
						</th>
					</tr>
					{% for i in prev %}
					<tr>
						<td >
							{{forloop.counter}}
						</td>
						<td >
							{{ i.hostel_name }}
						</td>
						<td >
							{{ i.room_no }}
						</td>
						<td >
							{{ i.hostel_join_date }}
						</td>
						<td >
							{{ i.hostel_leave_date }}
						</td>
					</tr>
					{% endfor %}
				</table>
				{% else %}
				No Records.
				{% endif %}
				<h5 class="center">
					Disciplinary actions & fines
				</h5>
				<hr>
				{% if crim|length >= 0 %}
				<table class="striped centered bordered"id="table1">
					<tr >
						<th >
							S.No.
						</th>
						<th >
							Date
						</th>
						<th >
							Fine Amount
						</th>
						<th >
							Paid ?
						</th>
						<th>

						</th>
					</tr>
					{% for i in crim %}
					<tr>
						<td >
							{{forloop.counter}}
						</td>
						<td >
							{{ i.date_of_action }}
						</td>
						<td >
							{{ i.fine_amount }}
						</td>
						<td >
							{% if i.paid %}
							Yes
							{% else %}
							No
							{% endif %}
						</td>
						<td>
							{% if i.paid == False and not i.student.room_number %}
							<a href="#!" onclick="PayFine('{{ i.pk }}','{{i.student}}')">Pay</a>
							{% endif %}
						</td>
					</tr>
					<tr><td colspan="5" class="center"><a href='{{i.file.url}}' action>{{ i.description|linebreaks }}</a></td></tr>
					{% endfor %}
				</table>
				{% else %}
				No Records.
				{% endif %}
				<h5 class="center">
					Payment History
				</h5>
				<hr>
				{% if paym|length >= 0 %}
				<table class="striped centered bordered"id="table1">
					<tr >
						<th >
							S.No.
						</th>
						<th >
							Receipt Number
						</th>
						<th >
							Payment Date
						</th>
						<th >
							Payment Amount
						</th>
						<th >
							Bank
						</th>
					</tr>
					{% for i in paym %}
					<tr>
						<td >
							{{forloop.counter}}
						</td>
						<td >
							{{ i.receiptNumber }}
						</td>
						<td >
							{{ i.paymentDate }}
						</td>
						<td >
							{{ i.paymentAmount }}
						</td>
						<td >
							{{ i.bank }}
						</td>
					</tr>
					{% endfor %}
				</table>
				{% else %}
				No Records.
				{% endif %}
			</div>
		</div>
	</div>
</div>


{% endblock %}

{% block script %}
<script type="text/javascript">
	$('.collapsible-body').css({
		"padding": "2%"
	});
</script>
<script type='text/javascript' >
	function PayFine(fineid,student) {
		if (confirm("Are you sure to pay Fine ?") == true) {
			window.location = '/chiefwarden/student/payfine/'+fineid+'/'+student+'/'
		}
	}
</script>
{% endblock %}
{% block sidelist %}
<li><a href="/chiefwarden/branch/">Branches</a></li>
<li><a href="/chiefwarden/notices/">Notices</a></li>
<li><a href="/chiefwarden/room/">Room</a></li>
<li><a href="/chiefwarden/student/">Student</a></li>
<li><a href="/chiefwarden/addBank/">Banks</a></li>
{% endblock %}
