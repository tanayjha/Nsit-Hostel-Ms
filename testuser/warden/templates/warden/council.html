{% extends "newapp/home.html" %}
{% load staticfiles %}
{% load material_form %}
{% block title %} HMS-Warden-Council {% endblock %}

{% block extrahead %}
{% endblock %}

{% block extrastyle %}
<style>
	.counpic{
		width: 200px;
		height: 200px;
		border: 1px solid;
		border-radius: 50%;
		margin-left: 20%;
		margin-top: 10%;
		background-repeat: no-repeat;
		background-position: center center;
  		background-size: cover;
	}
</style>
{% endblock %}

{% block sidelist %}
<li><a class="waves-effect" href="{% url 'warden-room' %}">Room</a></li>
<li><a class="waves-effect" href="{% url 'warden-student' %}">Student</a></li>
<li><a class="waves-effect" href="{% url 'warden-council' %}">Council</a></li>
<li><a class="waves-effect" href="{% url 'warden-notices' %}">Notices</a></li>
<li><a class="waves-effect" href="{% url 'wardenViewComplaint' %}">Complaints</a></li>
<li><a class="waves-effect" href="{% url 'warden-mess' %}">Mess</a></li>
<li><a class="waves-effect" href="{% url 'warden-facilities' %}">Facilities</a></li>
<li><a class="waves-effect" href="{% url 'warden-hosform' %}">Forms</a></li>
<li><a class="waves-effect" href="{% url 'wardenViewDefaulters' %}">Defaulters</a></li>
{% endblock %}
{% block content %}
<div class="row">
	<div class="col s12 m12 l12">
		<div class="card-panel">
		<h3>Hostel Council</h3>
			<ul class="collapsible" data-collapsible="accordion">
		    <li>
		      <div class="collapsible-header active">Add Member</div>
		      <div class="collapsible-body">
				<form method="post" action="{% url 'warden-add-council' %}" enctype="multipart/form-data">
					{% csrf_token %}
					<input type="hidden" name="next" value="{{ next }}" />
					{% form form=addcouncilform %}
					{% endform %}
					<div class="row">
						<div class="col s12"> 
							<button type="submit" name="add-council" class="btn waves-effect waves-light left">Add Member</button>
						</div>
					</div>
				</form>
		      </div>
		    </li>
		    {% if editformvisible %}
		    <li>
		      <div class="collapsible-header active">Edit Member</div>
		      <div class="collapsible-body">
				<form method="post" action="{% url 'warden-edit-council'  pk %}" enctype="multipart/form-data">
					{% csrf_token %}
					<input type="hidden" name="next" value="{{ next }}" />
					{% form form=editcouncilform %}
					{% endform %}
					<div class="row">
						<div class="col s12"> 
							<button type="submit" name="edit-council" class="btn waves-effect waves-light left">Edit Member</button>
							<a class="btn waves-effect waves-light right" href="{% url 'warden-council' %}">Cancel</a>
						</div>
					</div>
				</form>
		      </div>
		    </li>
		    {% endif %}
		  	</ul>
		  	{% for c in council %}
			  	<div class="card">
	            <div class="card-content black-text row">
	            <div class="col s12 l6 m6">
	              <span class="card-title deep-orange-text">{{ c.coun.position }} - {{ c.coun.committee }}</span>
	              <p class="brown-text text-darken-2">Name : {{ c.coun.name }}</p>
	              <p class="brown-text text-darken-2">Email : {{ c.coun.email }}</p>
	              <p class="brown-text text-darken-2">Phone Number : {{ c.coun.phone }}</p>
	              <p class="brown-text text-darken-2">Department/Room No. : {{ c.coun.dept_or_room }}</p>
	            </div>
	            <div class="col s12 l6 m6">
		            {% if c.photo %}
						<img class="counpic" src="{{ c.coun.photo.url }}">
					{% else %}
						<img class="counpic" src="/media/demo.png">
					{% endif %}
	            </div>
	            </div>
	            <div class="card-action">
	              <a class="blue-text" href="/warden/council/edit-council/{{ c.coun.pk }}/">Edit Member</a>
	              <a class="blue-text" href="#" onclick="myFunction('{{ c.coun.position }}','{{ c.coun.pk }}')">Delete Member</a>
	            </div>
	          	</div>
			{% endfor %}
			{% if council_added %}
			<script type="text/javascript">
				alert("Council Memebr added successfully.");
			</script>
			{% endif %}
		</div>
	</div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
	$('.collapsible-body').css({
		"padding": "2%"
	});
</script>
<script type='text/javascript' >
		function myFunction(cposition,cid) {
			a = "Delete council '"+cposition+"' ?"
			if (confirm(a) == true) {
				//console.log('url called')
				window.location = "/warden/council/delete-council/"+cid
				//console.log('url called again')
			}
		}
	</script>
{% endblock %}